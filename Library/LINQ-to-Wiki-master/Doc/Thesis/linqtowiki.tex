\chapter{The LinqToWiki library}
\label{ltw}

The LinqToWiki library consists of one Visual Studio solution, that contains the following projects:

\begin{itemize}
\item LinqToWiki.Core
\item LinqToWiki.Codegen
\item LinqToWiki.Codegen.App
\item LinqToWiki.ManuallyGenerated
\item LinqToWiki.Samples
\end{itemize}

The LinqToWiki.Core project contains the core of the library:
types that access the \ac{API}, convert to and from the representation of data in the \ac{API},
represent parameters of various types of queries, represent query results
or those that process \ac{LINQ} expression trees.
This project can be used together with code generated using LinqToWiki.Codegen,
or with manually written code.

The LinqToWiki.Codegen project handles generating code based on information from the \texttt{paraminfo} module.
It contains types that represent the results of that module, process them, generate C\# code and compile this code.
This project also contains helper types for easier creating of Roslyn syntax trees.

The LinqToWiki.Codegen.App project compiles down to a simple console application called linqtowiki-codegen,
that uses functionality from the LinqToWiki.\allowbreak{}Codegen project.

The LinqToWiki.ManuallyGenerated project is a sample of how one could write code to access a wiki using LinqToWiki without using LinqToWiki.Codegen to generate the code.

Finally, the LinqToWiki.Samples project contains samples showing how to use various API modules using LinqToWiki.
It uses code generated by LinqToWiki.\allowbreak{}Codegen.\allowbreak{}App.

\paragraph{Usage}

The intended usage of LinqToWiki is this:
First run the linqtowiki-codegen application to generate a \ac{DLL} tailored for a certain wiki.
Then use the generated library together with LinqToWiki.Core in your C\# (or \ac{VB.NET}) application to access that wiki.

An alternative is to get the generated \ac{DLL} from someone else and then use that.
An advantage of this approach is that the user does not have to have Roslyn installed.

Other options are possible, though.
For example, the LinqToWiki.Codegen library can be used to generate the code as a set of files containing C\# source code.
Those files can then be modified and manually compiled.

\input{ltw-core}

\input{ltw-codegen}

\input{ltw-codegen-app}

\input{ltw-samples}